import{r as n,R as I,j as i}from"./index-DpynD-RR.js";import{c as C}from"./index-DG5syul2.js";function T(S){const u=n.useMemo(()=>{const e=new Map;return S.forEach(l=>{const r=l.slideNumber;typeof r!="number"||r<1||(e.has(r)||e.set(r,[]),e.get(r).push(l))}),Array.from(e.keys()).sort((l,r)=>l-r).map(l=>e.get(l))},[S]),d=u.length;if(d<=1)return{totalSlides:0};const g=n.useMemo(()=>[u[d-1],...u,u[0]],[u,d]),[t,m]=n.useState(1),[p,c]=n.useState(0),[s,a]=n.useState(!1),[j,f]=n.useState(0),b=n.useRef(null),[v,E]=n.useState(!1),w=n.useRef(null),N=t===0?d:t===d+1?1:t,L=n.useCallback(()=>{a(!1),f(0),t===g.length-1?requestAnimationFrame(()=>m(1)):t===0&&requestAnimationFrame(()=>m(d))},[t,g.length,d]),o=n.useCallback(()=>{s||(c(t),m(e=>e+1),a(!0))},[s,t]),h=n.useCallback(()=>{s||(c(t),m(e=>e-1),a(!0))},[s,t]),y=n.useCallback(e=>{s||e===t||(c(t),m(e),a(!0))},[s,t]),x=n.useCallback(e=>{s||(E(!0),b.current=e.touches?e.touches[0].clientX:e.clientX)},[s]),_=n.useCallback(e=>{if(!v||s)return;const r=(e.touches?e.touches[0].clientX:e.clientX)-b.current;f(Math.max(Math.min(r/8,120),-120))},[s,v]),k=n.useCallback(e=>{if(!v||s)return;E(!1);const r=(e.changedTouches?e.changedTouches[0].clientX:e.clientX)-b.current;f(0),Math.abs(r)>50&&(r<0?o():h())},[s,v,o,h]);return n.useEffect(()=>{const e=w.current;if(!e)return;const l=r=>{r.target===e&&L()};return e.addEventListener("transitionend",l),()=>e.removeEventListener("transitionend",l)},[w,L]),n.useEffect(()=>{const e=w.current;if(e)return e.addEventListener("mousedown",x),window.addEventListener("mousemove",_),window.addEventListener("mouseup",k),e.addEventListener("touchstart",x,{passive:!0}),e.addEventListener("touchmove",_,{passive:!0}),e.addEventListener("touchend",k),()=>{e.removeEventListener("mousedown",x),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",k),e.removeEventListener("touchstart",x),e.removeEventListener("touchmove",_),e.removeEventListener("touchend",k)}},[x,_,k]),{sliderRef:w,extendedSlides:g,groupedSlides:u,totalSlides:d,activeIndex:t,prevIndex:p,isLocked:s,dragOffset:j,displayIndex:N,isDragging:v,goToNext:o,goToPrev:h,goToSlide:y}}function X({cardData:S,loading:u}){const{link:d,alt:g,srcMobile:t,srcDesktop:m,srcMobileWebp:p,srcMobileAvif:c,srcDesktopWebp:s,srcDesktopAvif:a,sizeSlider:j,positionSlider:f,zIndex:b,tabIndexNumber:v}=S,E=C("slider__item",{[`slider__item--size-${j}`]:j,[`slider__item--position-${f}`]:f,[`slider__item--z-${b}`]:b});return i.jsx("a",{href:d,className:E,tabIndex:v,draggable:"false",children:i.jsxs("picture",{children:[a&&i.jsx("source",{type:"image/avif",media:"(min-width: 768px)",srcSet:a}),s&&i.jsx("source",{type:"image/webp",media:"(min-width: 768px)",srcSet:s}),i.jsx("source",{media:"(min-width: 768px)",srcSet:m}),c&&i.jsx("source",{type:"image/avif",srcSet:c}),p&&i.jsx("source",{type:"image/webp",srcSet:p}),i.jsx("img",{src:t,alt:g,loading:u??"lazy"})]})})}const $=I.memo(X);function M({listType:S,data:u,loading:d}){const{sliderRef:g,extendedSlides:t,groupedSlides:m,totalSlides:p,activeIndex:c,prevIndex:s,isLocked:a,dragOffset:j,displayIndex:f,isDragging:b,goToNext:v,goToPrev:E,goToSlide:w}=T(u);if(p<=1)return null;const N={display:"flex","--active-index":c,"--drag-offset":`${j}px`,transition:a?"transform 0.8s cubic-bezier(.77,0,.175,1)":"none",cursor:a?"default":b?"grabbing":"grab"};return i.jsx("div",{className:`slider slider--${S}`,children:i.jsxs("div",{className:"slider__container",children:[i.jsx("button",{className:`slider__nav-btn slider__nav-btn--left ${a?"disabled":""}`,onClick:E,"aria-label":"Previous slide",disabled:a}),i.jsx("button",{className:`slider__nav-btn slider__nav-btn--right ${a?"disabled":""}`,onClick:v,"aria-label":"Next slide",disabled:a}),i.jsx("div",{className:"slider__viewport-wrapper",children:i.jsx("div",{className:"slider__viewport",children:i.jsx("div",{className:"slider__list",ref:g,style:N,children:t.map((L,o)=>{const h=o===c,y=o===s,x=h?0:-1,_=c===1&&s===t.length-1||c===p&&s===0,e={opacity:h||_&&(o===1||o===p)?1:0,transition:a?"opacity 0.8s ease-in-out, transform 0.8s cubic-bezier(.77,0,.175,1)":"none"},l=["slider__slide",h&&"slider__slide--active",y&&"slider__slide--fading"].filter(Boolean).join(" ");return i.jsx("div",{className:l,style:e,children:L.map(r=>i.jsx($,{cardData:r,tabIndexNumber:x,loading:d},r.id))},o)})})})}),i.jsx("div",{className:"slider__dots",children:m.map((L,o)=>i.jsx("button",{"aria-label":`Go to slide ${o+1}`,className:`slider__dot ${o+1===f?"slider__dot--active":""}`,"aria-current":o+1===f?"true":void 0,onClick:()=>w(o+1),disabled:a},o))})]})})}const A=I.memo(M);export{A as default};
