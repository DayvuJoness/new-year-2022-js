import{r,R as k,j as n}from"./index-DuPUkflG.js";import{c as I}from"./index-B_LvX2SN.js";function T(S){const u=r.useMemo(()=>{const e=new Map;return S.forEach(l=>{const i=l.slideNumber;typeof i!="number"||i<1||(e.has(i)||e.set(i,[]),e.get(i).push(l))}),Array.from(e.keys()).sort((l,i)=>l-i).map(l=>e.get(l))},[S]),d=u.length;if(d<=1)return{totalSlides:0};const h=r.useMemo(()=>[u[d-1],...u,u[0]],[u,d]),[s,m]=r.useState(1),[v,c]=r.useState(0),[t,a]=r.useState(!1),[j,g]=r.useState(0),x=r.useRef(null),[f,y]=r.useState(!1),E=r.useRef(null),N=s===0?d:s===d+1?1:s,L=r.useCallback(()=>{a(!1),g(0),s===h.length-1?requestAnimationFrame(()=>m(1)):s===0&&requestAnimationFrame(()=>m(d))},[s,h.length,d]),o=r.useCallback(()=>{t||(c(s),m(e=>e+1),a(!0))},[t,s]),p=r.useCallback(()=>{t||(c(s),m(e=>e-1),a(!0))},[t,s]),C=r.useCallback(e=>{t||e===s||(c(s),m(e),a(!0))},[t,s]),b=r.useCallback(e=>{t||(y(!0),x.current=e.touches?e.touches[0].clientX:e.clientX)},[t]),_=r.useCallback(e=>{if(!f||t)return;const i=(e.touches?e.touches[0].clientX:e.clientX)-x.current;g(Math.max(Math.min(i/8,120),-120))},[t,f]),w=r.useCallback(e=>{if(!f||t)return;y(!1);const i=(e.changedTouches?e.changedTouches[0].clientX:e.clientX)-x.current;g(0),Math.abs(i)>50&&(i<0?o():p())},[t,f,o,p]);return r.useEffect(()=>{const e=E.current;if(!e)return;const l=i=>{i.target===e&&L()};return e.addEventListener("transitionend",l),()=>e.removeEventListener("transitionend",l)},[E,L]),r.useEffect(()=>{const e=E.current;if(e)return e.addEventListener("mousedown",b),window.addEventListener("mousemove",_),window.addEventListener("mouseup",w),e.addEventListener("touchstart",b,{passive:!0}),e.addEventListener("touchmove",_,{passive:!0}),e.addEventListener("touchend",w),()=>{e.removeEventListener("mousedown",b),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",w),e.removeEventListener("touchstart",b),e.removeEventListener("touchmove",_),e.removeEventListener("touchend",w)}},[b,_,w]),{sliderRef:E,extendedSlides:h,groupedSlides:u,totalSlides:d,activeIndex:s,prevIndex:v,isLocked:t,dragOffset:j,displayIndex:N,isDragging:f,goToNext:o,goToPrev:p,goToSlide:C}}function X({link:S,alt:u,srcMobile:d,srcDesktop:h,srcMobileWebp:s,srcMobileAvif:m,srcDesktopWebp:v,srcDesktopAvif:c,sizeSlider:t,positionSlider:a,zIndex:j,tabIndexNumber:g,loading:x}){const f=I("slider__item",{[`slider__item--size-${t}`]:t,[`slider__item--position-${a}`]:a,[`slider__item--z-${j}`]:j});return n.jsx("a",{href:S,className:f,tabIndex:g,draggable:"false",children:n.jsxs("picture",{children:[c&&n.jsx("source",{type:"image/avif",media:"(min-width: 768px)",srcSet:c}),v&&n.jsx("source",{type:"image/webp",media:"(min-width: 768px)",srcSet:v}),n.jsx("source",{media:"(min-width: 768px)",srcSet:h}),m&&n.jsx("source",{type:"image/avif",srcSet:m}),s&&n.jsx("source",{type:"image/webp",srcSet:s}),n.jsx("img",{src:d,alt:u,loading:x??"lazy"})]})})}const $=k.memo(X);function R({listType:S,data:u,loading:d}){const{sliderRef:h,extendedSlides:s,groupedSlides:m,totalSlides:v,activeIndex:c,prevIndex:t,isLocked:a,dragOffset:j,displayIndex:g,isDragging:x,goToNext:f,goToPrev:y,goToSlide:E}=T(u);if(v<=1)return null;const N={display:"flex","--active-index":c,"--drag-offset":`${j}px`,transition:a?"transform 0.8s cubic-bezier(.77,0,.175,1)":"none",cursor:a?"default":x?"grabbing":"grab"};return n.jsx("div",{className:`slider slider--${S}`,children:n.jsxs("div",{className:"slider__container",children:[n.jsx("button",{className:`slider__nav-btn slider__nav-btn--left ${a?"disabled":""}`,onClick:y,"aria-label":"Previous slide",disabled:a}),n.jsx("button",{className:`slider__nav-btn slider__nav-btn--right ${a?"disabled":""}`,onClick:f,"aria-label":"Next slide",disabled:a}),n.jsx("div",{className:"slider__viewport-wrapper",children:n.jsx("div",{className:"slider__viewport",children:n.jsx("div",{className:"slider__list",ref:h,style:N,children:s.map((L,o)=>{const p=o===c,C=o===t,b=p?0:-1,_=c===1&&t===s.length-1||c===v&&t===0,e={opacity:p||_&&(o===1||o===v)?1:0,transition:a?"opacity 0.8s ease-in-out, transform 0.8s cubic-bezier(.77,0,.175,1)":"none"},l=["slider__slide",p&&"slider__slide--active",C&&"slider__slide--fading"].filter(Boolean).join(" ");return n.jsx("div",{className:l,style:e,children:L.map(i=>n.jsx($,{...i,tabIndexNumber:b,loading:d},i.id))},o)})})})}),n.jsx("div",{className:"slider__dots",children:m.map((L,o)=>n.jsx("button",{"aria-label":`Go to slide ${o+1}`,className:`slider__dot ${o+1===g?"slider__dot--active":""}`,"aria-current":o+1===g?"true":void 0,onClick:()=>E(o+1),disabled:a},o))})]})})}const O=k.memo(R);export{O as default};
