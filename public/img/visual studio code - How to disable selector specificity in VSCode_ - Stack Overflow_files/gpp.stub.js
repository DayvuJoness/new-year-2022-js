(()=>{var a=(e=>(e.CPRA="usca",e.CCPA="usca",e.CDPA="usva",e.OREGON="usor",e.USNATIONAL="usnat",e.COLORADO="usco",e.FLORIDA="usfl",e.CTDPA="usct",e.MONTANA="usmt",e.TEXAS="ustx",e.DELAWARE="usde",e.IOWA="usia",e.NEBRASKA="usne",e.TENNESSEE="ustn",e.NEWJERSEY="usnj",e.NEWHAMPSHIRE="usnh",e.UCPA="usut",e.VIRGINIA="usva",e.IAB2V2="tcfeuv2",e))(a||{}),o=(e=>(e[e.CPRA=8]="CPRA",e[e.CCPA=8]="CCPA",e[e.CDPA=9]="CDPA",e[e.OREGON=15]="OREGON",e[e.USNATIONAL=7]="USNATIONAL",e[e.COLORADO=10]="COLORADO",e[e.FLORIDA=13]="FLORIDA",e[e.MONTANA=14]="MONTANA",e[e.TEXAS=16]="TEXAS",e[e.DELAWARE=17]="DELAWARE",e[e.IOWA=18]="IOWA",e[e.NEBRASKA=19]="NEBRASKA",e[e.NEWHAMPSHIRE=20]="NEWHAMPSHIRE",e[e.NEWJERSEY=21]="NEWJERSEY",e[e.TENNESSEE=22]="TENNESSEE",e[e.UCPA=11]="UCPA",e[e.VIRGINIA=9]="VIRGINIA",e[e.CTDPA=12]="CTDPA",e[e.IAB2V2=2]="IAB2V2",e))(o||{});var v=()=>{let u=[],t={};return Object.keys(o).forEach(s=>{let n={};n[s]=o[s],t=Object.assign(n,t)}),Object.keys(a).map(s=>({name:s,value:a[s]})).forEach(s=>{let n=`${t[s.name]}:${s.value}`;u.push(n)}),u.filter((s,n)=>u.indexOf(s)===n)};var E=class{constructor(){this.LOCATOR_NAME="__gppLocator";this.win=window;this.customInit="";this.init=()=>{(!this.win.__gpp||typeof this.win.__gpp!="function")&&(this.win.__gpp=this.executeGppApi,window.addEventListener("message",this.messageHandler,!1),this.addFrame(this.LOCATOR_NAME))};this.removeGppApi=()=>{delete this.win.__gpp;let t=document.querySelectorAll(`iframe[name=${this.LOCATOR_NAME}]`)[0];t&&t.parentElement.removeChild(t)};this.executeGppApi=(...t)=>{var i;let r=(i=this.win)==null?void 0:i.__gpp;if(r.queue=r.queue||[],r.events=r.events||[],!t.length||t.length===1&&t[0]==="queue")return r.queue;if(t.length===1&&t[0]==="events")return r.events;let s=t[0],n=t.length>1?t[1]:null,p=t.length>2?t[2]:null;switch(s){case"ping":return this.getPingRequest(n);case"addEventListener":return this.addEventListener(n,p);case"removeEventListener":return this.removeEventListener(p);default:this.addToQueue(s,n,p);return}};this.getPingRequest=t=>{let r={gppVersion:1.1,cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:v(),currentAPI:"",cmpId:Number.parseInt("28"),sectionList:[],applicableSections:[0],gppString:"",parsedSections:{}};return t&&t(r,!0),r};this.addFrame=t=>{let r=this.win.document,s=Boolean(this.win.frames[t]);if(!s)if(r.body){let n=r.createElement("iframe");n.style.cssText="display:none",n.name=t,n.setAttribute("title","GPP Locator"),r.body.appendChild(n)}else setTimeout(()=>{this.addFrame(t)},5);return!s};this.addEventListener=(t,r)=>{let s=this.win.__gpp;return s.events=s.events||[],s!=null&&s.lastId||(s.lastId=0),s.lastId++,s.events.push({id:s.lastId,callback:t,parameter:r}),{eventName:"listenerRegistered",listenerId:s.lastId,data:!0,pingData:this.getPingRequest()}};this.removeEventListener=t=>{let r=!1,s=this.win.__gpp;return s.events=s.events||[],s.events=s.events.filter(n=>n.id.toString()===t.toString()?(r=!0,!1):!0),{eventName:"listenerRemoved",listenerId:t,data:r,pingData:this.getPingRequest()}};this.addToQueue=(t,r,s)=>{let n=this.win.__gpp;n.queue=n.queue||[],n.queue.push([t,r,s])};this.messageHandler=t=>{let r=typeof t.data=="string",s;try{s=r?JSON.parse(t.data):t.data}catch(n){s=null}if(s&&s.__gppCall){let n=s.__gppCall,p=this.win.__gpp;p(n.command,function(i,g){let c={__gppReturn:{returnValue:i,success:g,callId:n.callId}};t&&t.source&&t.source.postMessage&&t.source.postMessage(r?JSON.stringify(c):c,t.origin||"*")},n.parameter)}};this.customInit||this.init()}},L=new E;})();
